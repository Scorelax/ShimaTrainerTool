<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Pokemon D&D Trainer Management Tool">
  <title>Pokemon D&D Trainer Tool</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/Pokeball.png">

  <!-- PWA Support -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FF6B6B">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Pokemon D&D">
  <link rel="apple-touch-icon" href="assets/Pokeball.png">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">

  <!-- Preload title screen for instant display -->
  <link rel="preload" as="image" href="assets/TitleScreen.png">

  <!-- Preconnect to API -->
  <link rel="preconnect" href="https://script.google.com">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen active">
    <div class="pokeball-loader"></div>
    <p>Loading your adventure...</p>
    <div class="loading-progress-container">
      <div class="loading-progress-bar">
        <div id="loading-progress-fill" class="loading-progress-fill"></div>
      </div>
      <p id="loading-progress-text" class="loading-progress-text">Preparing...</p>
    </div>
  </div>

  <!-- Main App -->
  <div id="app" class="app hidden">
    <!-- Navigation -->
    <nav class="main-nav">
      <div class="nav-brand">
        <img src="assets/Pokeball.png" alt="Pokeball" class="nav-logo" onerror="this.style.display='none'">
        <h1>Pokemon D&D</h1>
      </div>

      <ul class="nav-menu">
        <li><a href="#home" data-route="home" class="nav-link active">Home</a></li>
        <li><a href="#trainers" data-route="trainers" class="nav-link">Trainers</a></li>
        <li><a href="#pokemon" data-route="pokemon" class="nav-link">Pokemon</a></li>
        <li><a href="#pokedex" data-route="pokedex" class="nav-link">Pokedex</a></li>
      </ul>

      <!-- Offline Indicator -->
      <div id="offline-indicator" class="offline-indicator hidden">
        <span>üì° Offline Mode</span>
      </div>
    </nav>

    <!-- Main Content Area -->
    <main id="content" class="content">
      <!-- Content will be dynamically loaded here -->
    </main>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>
  </div>

  <!-- Error Screen -->
  <div id="error-screen" class="error-screen hidden">
    <h2>‚ö†Ô∏è Something went wrong</h2>
    <p id="error-message"></p>
    <button onclick="location.reload()">Retry</button>
  </div>

  <!-- Scripts -->
  <script type="module" src="js/main.js"></script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(reg => console.log('[PWA] Service worker registered:', reg.scope))
          .catch(err => console.log('[PWA] Service worker registration failed:', err));
      });
    }
  </script>
</body>
</html>
